(this["webpackJsonplibrary-project"]=this["webpackJsonplibrary-project"]||[]).push([[0],{61:function(e,a,t){e.exports=t.p+"static/media/brickwork-covers-top.65bf13f6.jpg"},62:function(e,a,t){e.exports=t.p+"static/media/casino-background_2x-removebg-preview.5411cddb.png"},69:function(e,a,t){e.exports=t.p+"static/media/logowa.f43d6a47.png"},72:function(e,a,t){e.exports=t.p+"static/media/logowacopy.f43d6a47.png"},74:function(e,a,t){e.exports=t(94)},81:function(e,a,t){},9:function(e,a,t){e.exports={container:"Sign_container__3sX-T","forms-container":"Sign_forms-container__4LFiE","signin-signup":"Sign_signin-signup__T3fEU","sign-in-form":"Sign_sign-in-form__rSgzR","sign-up-form":"Sign_sign-up-form__hiEdR",title:"Sign_title__16-mS","input-field":"Sign_input-field__3Q_WZ",ccc:"Sign_ccc__1psRt","social-text":"Sign_social-text__2R5xn","social-media":"Sign_social-media__1gYoI","social-icon":"Sign_social-icon__3IRLN",message:"Sign_message__4zXWY",btn:"Sign_btn__C0Ee8","panels-container":"Sign_panels-container__3pFFV",image:"Sign_image__3g5K_",panel:"Sign_panel__2Qo8j","left-panel":"Sign_left-panel__1Vyqa","right-panel":"Sign_right-panel__3uhbQ",content:"Sign_content__24n5K",transparent:"Sign_transparent__aBdHO","sign-up-mode":"Sign_sign-up-mode__2FG0N"}},91:function(e,a,t){},92:function(e,a,t){},93:function(e,a,t){},94:function(e,a,t){"use strict";t.r(a);var l=t(0),r=t.n(l),n=t(68),c=t.n(n),o=t(11),s=t(6),m=(t(80),t(108)),i=t(96),u=t(111),d=t(109),E=t(70),p=t(97),g=t(69),b=t.n(g),h=t(107);t(81);var y=e=>{let{isLoggedIn:a,setIsLoggedIn:t}=e;const[n,c]=Object(l.useState)(""),g=Object(s.r)();return r.a.createElement(m.a,{expand:"lg",className:"sticky-top navbar-custom"},r.a.createElement(i.a,{fluid:!0},r.a.createElement(m.a.Brand,{as:o.a,to:"/",className:"navbar-brand-custom"},r.a.createElement("img",{src:b.a,alt:"Logo",className:"navbar-logo"})),r.a.createElement(m.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(m.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(u.a,{className:"mx-auto"},r.a.createElement(d.a,{className:"search-form",onSubmit:e=>{e.preventDefault(),n.trim()&&(g("/search?q="+encodeURIComponent(n.trim())),c(""))}},r.a.createElement(E.a,{type:"search",placeholder:"Search Anything...",className:"search-input",value:n,onChange:e=>c(e.target.value),"aria-label":"Search"}),r.a.createElement(p.a,{type:"submit",className:"search-button"},r.a.createElement("i",{className:"fas fa-search"})," Search"))),r.a.createElement(u.a,null,a?r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a.Link,{as:o.a,to:"/favorites",className:"navbar-link-custom"},"Favorite"),r.a.createElement(u.a.Link,{as:o.a,to:"/addbook",className:"navbar-link-custom"},"Add Book"),r.a.createElement(u.a.Link,{as:o.a,to:"/profile",className:"navbar-link-custom"},"Profile"),r.a.createElement(u.a.Link,{onClick:async()=>{try{await h.a.get("http://localhost:5000/api/auth/logout",{withCredentials:!0}),t(!1),g("/")}catch(e){console.error("Logout failed:",e),alert("Logout failed")}},className:"logina navbar-link-custom px-3"},"Logout")):r.a.createElement(u.a.Link,{as:o.a,to:"/login",className:"logina navbar-link-custom px-3"},"Login")))))},f=(t(91),t(98)),v=t(71),N=t(31),k=t(72),x=t.n(k);var C=()=>r.a.createElement("footer",{className:"footer backg text-light py-5"},r.a.createElement(i.a,null,r.a.createElement(f.a,{className:"footer-content align-items-center"},r.a.createElement(v.a,{xs:12,md:4,className:"footer-logo mb-4 mb-md-0"},r.a.createElement("a",{href:"/"},r.a.createElement("img",{src:x.a,alt:"logo",className:"img-fluid",style:{maxWidth:"130px"}}))),r.a.createElement(v.a,{xs:12,md:4,className:"footer-links mb-4 mb-md-0"},r.a.createElement("ul",{className:"list-unstyled"},[{href:"/privacy",text:"Privacy Policy"},{href:"/terms",text:"Terms of Service"},{href:"/aboutus",text:"About Us"},{href:"/contactus",text:"Contact Us"}].map(e=>r.a.createElement("li",{key:e.href},r.a.createElement("a",{href:e.href,className:"text-decoration-none text-white hover-effect"},e.text))))),r.a.createElement(v.a,{xs:12,md:4,className:"footer-social"},r.a.createElement("ul",{className:"list-unstyled footer-icons d-flex justify-content-center"},[{Icon:N.c,href:"https://www.instagram.com/"},{Icon:N.b,href:"https://www.facebook.com/"},{Icon:N.d,href:"https://twitter.com/"}].map(e=>{let{Icon:a,href:t}=e;return r.a.createElement("li",{key:t,className:"mx-2"},r.a.createElement("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"text-white social-icon-link"},r.a.createElement(a,{size:30})))})))),r.a.createElement(f.a,{className:"mt-4"},r.a.createElement(v.a,{className:"text-center"},r.a.createElement("p",{className:"mb-0"},"\xa9 ",(new Date).getFullYear()," Alaeddine & Abdennacer .All rights reserved.")))));const w=Object(l.createContext)(null),S=e=>{let{children:a}=e;const[t,n]=Object(l.useState)(!1),[c,o]=Object(l.useState)(null),[s,m]=Object(l.useState)(!1),[i,u]=Object(l.useState)(!0),d=async()=>{u(!0);try{const e=await h.a.post("http://localhost:5000/api/auth/check_authenticateToken",{},{withCredentials:!0});200===e.status?(n(!0),o(e.data.user),m("admin"===e.data.user.role)):(n(!1),o(null),m(!1))}catch(e){console.error("Error checking auth status:",e),n(!1),o(null),m(!1)}u(!1)};return Object(l.useEffect)(()=>{d()},[]),r.a.createElement(w.Provider,{value:{isLoggedIn:t,setIsLoggedIn:n,user:c,setUser:o,isAdmin:s,isLoading:i,checkAuthStatus:d}},a)},_=()=>Object(l.useContext)(w);var j=()=>{const{isLoggedIn:e,setIsLoggedIn:a,checkAuthStatus:t}=_();return r.a.createElement(r.a.Fragment,null,r.a.createElement(y,{isLoggedIn:e,setIsLoggedIn:a,checkAuthStatus:t}),r.a.createElement(s.b,null),r.a.createElement(C,null))},O=t(110);var T=e=>{let{book:a}=e;const[t,n]=Object(l.useState)(!1);return r.a.createElement(O.a,{className:"h-100 shadow-sm "+(t?"clicked":""),style:{transition:"transform 0.3s ease",transform:t?"scale(1.05)":"scale(1)"},onClick:()=>{n(!t)}},r.a.createElement(O.a.Img,{variant:"top",src:a.cover,alt:a.title,style:{height:"350px",objectFit:"cover"}}),r.a.createElement(O.a.Body,{className:"d-flex flex-column"},r.a.createElement(O.a.Title,{className:"font-weight-bold"},a.title),r.a.createElement(O.a.Text,{className:"text-muted mb-auto"},"Author: ",a.author),r.a.createElement(o.a,{to:`/allbooks/${a.category}/${a._id}`,className:"btn btn-primary mt-3",style:{backgroundColor:"#E74C3C",borderColor:"#E74C3C",transition:"all 0.3s ease"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="#C0392B",e.currentTarget.style.borderColor="#C0392B",e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 4px 8px rgba(0,0,0,0.2)"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="#E74C3C",e.currentTarget.style.borderColor="#E74C3C",e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none"}},"View Details")))};var B=()=>{const[e,a]=Object(l.useState)([]),[t,n]=Object(l.useState)(!0),[c,o]=Object(l.useState)(null);return Object(l.useEffect)(()=>{(async()=>{try{const e=await fetch("http://localhost:5000/api/books");if(!e.ok)throw new Error("HTTP error! status: "+e.status);const t=await e.json();a(t),n(!1)}catch(c){console.error("Failed to fetch books:",c),o("Failed to load books. Please try again later."),n(!1)}})()},[]),t?r.a.createElement("div",null,"Loading..."):c?r.a.createElement("div",null,c):r.a.createElement(i.a,{fluid:!0,className:"py-4"},r.a.createElement("h1",{className:"text-center mb-4",style:{color:"#333",fontWeight:"bold"}},"Available Books"),r.a.createElement(f.a,{xs:1,sm:2,md:3,lg:4,xl:6,className:"g-4 mx-5"},e.map(e=>r.a.createElement(v.a,{key:e._id},r.a.createElement(T,{category:e.category,book:e})))))};var I=()=>r.a.createElement(r.a.Fragment,null,r.a.createElement(B,null));var L=()=>r.a.createElement(i.a,{fluid:!0,className:"py-5",style:{backgroundColor:"#f8f9fa",minHeight:"100vh"}},r.a.createElement(f.a,{className:"justify-content-center align-items-center",style:{minHeight:"60vh"}},r.a.createElement(v.a,{xs:12,md:8,lg:6,className:"text-center"},r.a.createElement("h1",{style:{fontSize:"6rem",color:"#333"}},"404"),r.a.createElement("h2",{className:"mb-4",style:{color:"#666"}},"Oops! Page Not Found"),r.a.createElement("p",{className:"mb-4",style:{color:"#888"}},"The page you're looking for doesn't exist or has been moved."),r.a.createElement(o.a,{to:"/"},r.a.createElement(p.a,{variant:"primary",size:"lg"},"Go Back to Home"))))),F=t(112),A=t(99),P=t(100),U=t(101);t(92);var D=()=>{const{category:e,bookId:a}=Object(s.t)(),[t,n]=Object(l.useState)(!1),[c,o]=Object(l.useState)(null),[m,u]=Object(l.useState)(!0),[d,E]=Object(l.useState)(null),[g,b]=Object(l.useState)(!1);Object(l.useEffect)(()=>{(async()=>{try{const t=await fetch(`http://localhost:5000/api/${e}/${a}`);if(!t.ok)throw new Error("HTTP error! status: "+t.status);const l=await t.json();o(l)}catch(d){console.error("Could not fetch book:",d),E("Failed to load book. Please try again later.")}finally{u(!1)}})()},[e,a]);const h=()=>{n(!t)},y=()=>b(!1);return m?r.a.createElement("div",null,"Loading..."):d?r.a.createElement("div",null,d):c?r.a.createElement(i.a,{className:"py-5"},r.a.createElement(f.a,{className:"g-4"},r.a.createElement(v.a,{md:4},r.a.createElement(O.a,{className:"border-0 shadow-sm"},r.a.createElement("div",{onClick:h,className:"position-relative",style:{cursor:"pointer",overflow:"hidden"}},r.a.createElement(O.a.Img,{variant:"top",src:c.cover,alt:c.title,className:"hover-zoom",style:{height:"500px",objectFit:"contain",width:"100%",transition:"transform 0.3s ease"}}),r.a.createElement("div",{className:"image-overlay"},r.a.createElement("span",{className:"click-to-zoom"},"Click to zoom")))),r.a.createElement("div",{className:"d-grid mt-4"},r.a.createElement(p.a,{className:"read-book-btn py-3 rounded-3 d-flex align-items-center justify-content-center gap-2",onClick:()=>b(!0),style:{backgroundColor:"#2ecc71",border:"none",transition:"all 0.3s ease"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="#27ae60",e.currentTarget.style.transform="translateY(-2px)"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="#2ecc71",e.currentTarget.style.transform="translateY(0)"}},r.a.createElement(A.a,{size:20})," Read This Book"),r.a.createElement(p.a,{className:"add-to-favorites-btn py-3 rounded-3 d-flex align-items-center justify-content-center gap-2",onClick:()=>{const e=JSON.parse(localStorage.getItem("favorites"))||[];e.some(e=>e._id===c._id)?alert("This book is already in your favorites!"):(e.push(c),localStorage.setItem("favorites",JSON.stringify(e)),alert("Book added to favorites!"))},style:{backgroundColor:"#e74c3c",border:"none",transition:"all 0.3s ease"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="#c0392b",e.currentTarget.style.transform="translateY(-2px)"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="#e74c3c",e.currentTarget.style.transform="translateY(0)"}},r.a.createElement(P.a,{size:20})," Add To Favorite"))),r.a.createElement(v.a,{md:8},r.a.createElement("div",{className:"p-4"},r.a.createElement("h1",{className:"display-5 mb-3 fw-bold"},c.title),r.a.createElement("h4",{className:"text-muted mb-4"},"by ",c.author),r.a.createElement("div",{className:"mb-4"},r.a.createElement("h5",{className:"text-dark mb-3"},"Description:"),r.a.createElement("p",{className:"lead text-secondary"},c.description)),r.a.createElement("div",{className:"mt-4"},r.a.createElement("div",{className:"d-flex gap-3 flex-wrap"},r.a.createElement("span",{className:"badge bg-primary p-2"},"Category: ",e)))))),r.a.createElement(F.a,{show:g,onHide:y,centered:!0,className:"book-modal"},r.a.createElement(F.a.Header,{className:"border-0 pb-0 d-flex justify-content-between align-items-center"},r.a.createElement(F.a.Title,{className:"text-primary"},"Open The Book"),r.a.createElement(p.a,{variant:"link",onClick:y,className:"p-0 text-dark"},r.a.createElement(U.a,{size:24}))),r.a.createElement(F.a.Body,{className:"text-center py-4"},r.a.createElement("p",{className:"mb-0"},'Click Yes To View "',c.title,'" Content')),r.a.createElement(F.a.Footer,{className:"border-0 pt-0"},r.a.createElement(p.a,{variant:"outline-secondary",onClick:y,className:"px-4"},"Cancel"),r.a.createElement(p.a,{variant:"success",onClick:()=>{c.pdfUrl?window.open(c.pdfUrl,"_blank"):alert("PDF not available for this book."),y()},className:"px-4"},"YES"))),t&&r.a.createElement("div",{onClick:h,className:"image-overlay-container",style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",zIndex:1e3}},r.a.createElement(p.a,{className:"position-absolute top-4 end-4 bg-transparent border-0",onClick:h},r.a.createElement(U.a,{size:24,color:"white"})),r.a.createElement("img",{src:c.cover,alt:c.title,style:{maxHeight:"90vh",maxWidth:"90vw",objectFit:"contain",transition:"transform 0.3s ease"}}))):r.a.createElement("p",null,"Book not found")};t(93);const $=["Adventure","Romance","Thriller","Memoir","Travel","Health","Poetry","Cooking"];var z=()=>{const[e,a]=Object(l.useState)(null),[t,n]=Object(l.useState)(""),[c,o]=Object(l.useState)(""),[s,m]=Object(l.useState)(""),[u,E]=Object(l.useState)(""),g=Object(l.useRef)(null),[b,y]=Object(l.useState)(null);return r.a.createElement(i.a,{className:"d-flex justify-content-center align-items-center",style:{minHeight:"100vh"}},r.a.createElement(d.a,{className:"addbook shadow p-4 bg-white rounded",style:{width:"100%",maxWidth:"400px"},onSubmit:async l=>{l.preventDefault();try{const l={title:t,author:c,description:s,cover:e,category:u,pdfUrl:b};if(!(await fetch("http://localhost:5000/api/addbook",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l),credentials:"include"})).ok)throw new Error("Failed to add book");a(null),n(""),o(""),m(""),E(""),g.current.value=null,alert("Book added successfully!")}catch(r){console.error("Error adding book:",r),alert("Failed to add book. Please try again.")}}},r.a.createElement("h2",{className:"text-center mb-4",style:{color:"#333",fontWeight:"bold"}},"Add New Book"),r.a.createElement(d.a.Group,{className:"mb-3",controlId:"formBookImage"},r.a.createElement(d.a.Label,null,"Book Cover"),r.a.createElement(d.a.Control,{type:"file",onChange:async e=>{const t=e.target.files[0],l=new FormData;l.append("file",t),l.append("upload_preset","y1f5bwss");try{const e=await h.a.post("https://api.cloudinary.com/v1_1/djux9krem/image/upload",l);a(e.data.secure_url)}catch(r){console.error("Error uploading image: ",r)}},ref:g,required:!0})),e&&r.a.createElement("img",{src:e,alt:"Book cover preview",style:{width:"100%",marginBottom:"15px"}}),r.a.createElement(d.a.Group,{className:"mb-3",controlId:"formBookName"},r.a.createElement(d.a.Label,null,"Book Name"),r.a.createElement(d.a.Control,{type:"text",placeholder:"Write book name",value:t,onChange:e=>n(e.target.value),required:!0})),r.a.createElement(d.a.Group,{className:"mb-3",controlId:"formBookPdf"},r.a.createElement(d.a.Label,null,"Book PDF"),r.a.createElement(d.a.Control,{type:"file",onChange:async e=>{const a=e.target.files[0],t=new FormData;t.append("file",a),t.append("upload_preset","pdf_uploads");try{const e=await h.a.post("https://api.cloudinary.com/v1_1/djux9krem/raw/upload",t);y(e.data.secure_url)}catch(l){console.error("Error uploading PDF: ",l)}},accept:".pdf"})),r.a.createElement(d.a.Group,{className:"mb-3",controlId:"formBookAuthor"},r.a.createElement(d.a.Label,null,"Book Author"),r.a.createElement(d.a.Control,{type:"text",placeholder:"Write book author",value:c,onChange:e=>o(e.target.value),required:!0})),r.a.createElement(d.a.Group,{className:"mb-3",controlId:"formBookDescription"},r.a.createElement(d.a.Label,null,"Book Description"),r.a.createElement(d.a.Control,{as:"textarea",rows:3,placeholder:"Write book description",value:s,onChange:e=>m(e.target.value),required:!0})),r.a.createElement(d.a.Group,{className:"mb-3",controlId:"formBookCategory"},r.a.createElement(d.a.Label,null,"Book Category"),r.a.createElement(d.a.Select,{value:u,onChange:e=>E(e.target.value),required:!0},r.a.createElement("option",{value:""},"Select a category"),$.map(e=>r.a.createElement("option",{key:e,value:e},e)))),r.a.createElement(p.a,{style:{backgroundColor:"#E74C3C",borderColor:"#E74C3C"},variant:"primary",type:"submit",className:"w-100"},"Add Book")))},Y=t(113);var R=()=>{const e=Object(s.p)(),a=new URLSearchParams(e.search).get("q"),[t,n]=Object(l.useState)([]),[c,o]=Object(l.useState)(!0),[m,u]=Object(l.useState)(null);return Object(l.useEffect)(()=>{a&&(async()=>{o(!0);try{const e=await h.a.get("http://localhost:5000/api/search?q="+a);n(e.data),o(!1)}catch(e){console.error("Failed to fetch search results:",e),u("Failed to load search results. Please try again later."),o(!1)}})()},[a]),c?r.a.createElement("div",null,"Loading..."):m?r.a.createElement(Y.a,{variant:"danger"},m):r.a.createElement(i.a,{fluid:!0,className:"py-5"},r.a.createElement("h1",{className:"text-center mb-5",style:{color:"#333",fontWeight:"bold"}},'Search Results for "',a,'"'),0===t.length?r.a.createElement(Y.a,{variant:"info"},"No books found matching your search."):r.a.createElement(f.a,{xs:1,sm:2,md:3,lg:4,xl:6,className:"g-4 mx-5"},t.map(e=>r.a.createElement(v.a,{key:e._id},r.a.createElement(T,{category:e.category,book:e})))))},q=t(102),W=t(61),G=t.n(W);var H=()=>{const e=Object(s.r)();return r.a.createElement(i.a,{fluid:!0,className:"p-0 overflow-hidden"},r.a.createElement(f.a,{noGutters:!0},r.a.createElement(v.a,{className:"p-0"},r.a.createElement(q.a,{src:G.a,alt:"Brickwork",className:"w-100",fluid:!0}))),r.a.createElement(f.a,{className:"justify-content-center mt-4 mx-0"},r.a.createElement(v.a,{xs:12,md:8,lg:6,className:"text-center"},r.a.createElement("h1",{style:{fontSize:"3.5rem"}},"About Our Library"),r.a.createElement("p",{className:"mt-3",style:{fontSize:"1.5rem"}},"Welcome to our library! We are dedicated to providing a vast collection of resources and a comfortable space for all your reading and research needs. Explore our diverse collection and enjoy a quiet place to immerse yourself in the world of books."),r.a.createElement(p.a,{variant:"danger",className:"mt-3 mb-5 px-4 py-2",size:"lg",onClick:()=>e("/"),style:{transition:"all 0.3s ease"},onMouseOver:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 4px 12px rgba(220, 53, 69, 0.3)",e.currentTarget.style.backgroundColor="#c82333",e.currentTarget.style.borderColor="#c82333"},onMouseOut:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none",e.currentTarget.style.backgroundColor="#dc3545",e.currentTarget.style.borderColor="#dc3545"}},"Explore Our Books"))),r.a.createElement(f.a,null,r.a.createElement(v.a,{className:"p-0"},r.a.createElement(q.a,{src:G.a,alt:"Brickwork",className:"w-100",fluid:!0}))))};var M=()=>{const[e,a]=Object(l.useState)([]);Object(l.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("favorites"))||[];a(e)},[]);return r.a.createElement(i.a,{fluid:!0,className:"py-5"},r.a.createElement("h1",{className:"text-center mb-5",style:{color:"#333",fontWeight:"bold"}},"Your Favorite Books"),0===e.length?r.a.createElement(Y.a,{variant:"info"},"You haven't added any books to your favorites yet."):r.a.createElement(f.a,{xs:1,sm:2,md:3,lg:4,xl:6,className:"g-4 mx-5"},e.map(t=>r.a.createElement(v.a,{key:`${t.category}-${t.id}`},r.a.createElement("div",{className:"position-relative"},r.a.createElement(T,{category:t.category,book:t}),r.a.createElement("button",{className:"btn btn-danger position-absolute top-0 end-0 m-2",onClick:()=>(t=>{const l=e.filter(e=>e._id!==t);console.log("Updated favorites:",l),a(l),localStorage.setItem("favorites",JSON.stringify(l))})(t._id)},"Remove"))))))};var J=()=>{const[e,a]=Object(l.useState)(null),[t,n]=Object(l.useState)([]),[c,o]=Object(l.useState)(!0),[s,m]=Object(l.useState)(null),[u,E]=Object(l.useState)(!1),[g,b]=Object(l.useState)(!1),[y,N]=Object(l.useState)(null),[k,x]=Object(l.useState)({username:"",phone:"",address:"",country:"",profileImage:""});Object(l.useEffect)(()=>{(async()=>{try{const e=await h.a.get("http://localhost:5000/api/auth/profile",{withCredentials:!0});a(e.data),x({username:e.data.username,phone:e.data.phone,address:e.data.address,country:e.data.country,profileImage:e.data.profileImage||""});const t=await h.a.get("http://localhost:5000/api/user-books",{withCredentials:!0});n(t.data),o(!1)}catch(e){m("Failed to fetch profile data or user books"),o(!1)}})()},[]);const C=e=>{x({...k,[e.target.name]:e.target.value})};return c?r.a.createElement("div",null,"Loading..."):s?r.a.createElement("div",null,s):e?r.a.createElement("section",{style:{backgroundColor:"white",padding:"20px"}},r.a.createElement(i.a,{style:{backgroundColor:"#f8f9fa",padding:"20px",borderRadius:"10px"}},r.a.createElement(f.a,null,r.a.createElement(v.a,{lg:4},r.a.createElement(O.a,{className:"mb-4"},r.a.createElement(O.a.Body,{className:"text-center"},e.profileImage?r.a.createElement("img",{src:e.profileImage,alt:"avatar",className:"rounded-circle img-fluid",style:{width:"150px"}}):r.a.createElement("img",{src:"https://via.placeholder.com/150",alt:"avatar",className:"rounded-circle img-fluid",style:{width:"150px"}}),r.a.createElement("h5",{className:"my-3"},e.username),r.a.createElement("p",{className:"text-muted mb-1"},"User"),r.a.createElement("p",{className:"text-muted mb-4"},e.country),r.a.createElement("div",{className:"d-flex justify-content-center mb-2"},r.a.createElement(p.a,{variant:"primary",style:{backgroundColor:"#E74C3C",borderColor:"#E74C3C"},onClick:()=>E(!u)},u?"Cancel Edit":"Edit Profile"))))),r.a.createElement(v.a,{lg:8},u?r.a.createElement(O.a,{className:"mb-4"},r.a.createElement(O.a.Body,null,r.a.createElement(d.a,{onSubmit:async e=>{e.preventDefault();try{const e=await h.a.put("http://localhost:5000/api/auth/profile",k,{withCredentials:!0});a(e.data),E(!1)}catch(t){m("Failed to update profile")}}},r.a.createElement(d.a.Group,{as:f.a,className:"mb-3"},r.a.createElement(d.a.Label,{column:!0,sm:3},"Profile Image"),r.a.createElement(v.a,{sm:9},r.a.createElement(d.a.Control,{type:"file",onChange:async e=>{const a=e.target.files[0],t=new FormData;t.append("file",a),t.append("upload_preset","y1f5bwss");try{const e=await h.a.post("https://api.cloudinary.com/v1_1/djux9krem/image/upload",t);x(a=>({...a,profileImage:e.data.secure_url}))}catch(l){console.error("Error uploading image: ",l)}}}))),r.a.createElement(d.a.Group,{as:f.a,className:"mb-3"},r.a.createElement(d.a.Label,{column:!0,sm:3},"Username"),r.a.createElement(v.a,{sm:9},r.a.createElement(d.a.Control,{type:"text",name:"username",value:k.username,onChange:C}))),r.a.createElement(d.a.Group,{as:f.a,className:"mb-3"},r.a.createElement(d.a.Label,{column:!0,sm:3},"Phone"),r.a.createElement(v.a,{sm:9},r.a.createElement(d.a.Control,{type:"text",name:"phone",value:k.phone,onChange:C}))),r.a.createElement(d.a.Group,{as:f.a,className:"mb-3"},r.a.createElement(d.a.Label,{column:!0,sm:3},"Address"),r.a.createElement(v.a,{sm:9},r.a.createElement(d.a.Control,{type:"text",name:"address",value:k.address,onChange:C}))),r.a.createElement(d.a.Group,{as:f.a,className:"mb-3"},r.a.createElement(d.a.Label,{column:!0,sm:3},"Country"),r.a.createElement(v.a,{sm:9},r.a.createElement(d.a.Control,{type:"text",name:"country",value:k.country,onChange:C}))),r.a.createElement(p.a,{type:"submit",variant:"primary"},"Save Changes")))):r.a.createElement(O.a,{className:"mb-4"},r.a.createElement(O.a.Body,null,r.a.createElement(f.a,{className:"mb-3"},r.a.createElement(v.a,{sm:3},r.a.createElement("p",{className:"mb-0"},"Username")),r.a.createElement(v.a,{sm:9},r.a.createElement("p",{className:"text-muted mb-0"},e.username))),r.a.createElement("hr",null),r.a.createElement(f.a,{className:"mb-3"},r.a.createElement(v.a,{sm:3},r.a.createElement("p",{className:"mb-0"},"Email")),r.a.createElement(v.a,{sm:9},r.a.createElement("p",{className:"text-muted mb-0"},e.email))),r.a.createElement("hr",null),r.a.createElement(f.a,{className:"mb-3"},r.a.createElement(v.a,{sm:3},r.a.createElement("p",{className:"mb-0"},"Phone")),r.a.createElement(v.a,{sm:9},r.a.createElement("p",{className:"text-muted mb-0"},e.phone))),r.a.createElement("hr",null),r.a.createElement(f.a,{className:"mb-3"},r.a.createElement(v.a,{sm:3},r.a.createElement("p",{className:"mb-0"},"Address")),r.a.createElement(v.a,{sm:9},r.a.createElement("p",{className:"text-muted mb-0"},e.address))),r.a.createElement("hr",null),r.a.createElement(f.a,{className:"mb-3"},r.a.createElement(v.a,{sm:3},r.a.createElement("p",{className:"mb-0"},"Country")),r.a.createElement(v.a,{sm:9},r.a.createElement("p",{className:"text-muted mb-0"},e.country))))))),r.a.createElement(f.a,{className:"mt-5"},r.a.createElement(v.a,null,r.a.createElement("h2",null,"Your Uploaded Books"),0===t.length?r.a.createElement("p",null,"You haven't uploaded any books yet."):r.a.createElement(f.a,{xs:1,sm:2,md:3,lg:4,className:"g-4"},t.map(e=>r.a.createElement(v.a,{key:e._id},r.a.createElement(O.a,null,r.a.createElement("div",{className:"position-relative"},r.a.createElement(O.a.Img,{variant:"top",src:e.cover}),r.a.createElement(p.a,{variant:"danger",size:"sm",className:"position-absolute top-0 end-0 m-2",onClick:()=>(e=>{N(e),b(!0)})(e)},"X")),r.a.createElement(O.a.Body,null,r.a.createElement(O.a.Title,null,e.title),r.a.createElement(O.a.Text,null,e.author),r.a.createElement(p.a,{variant:"primary",href:`/allbooks/${e.category}/${e._id}`,style:{backgroundColor:"#E74C3C",borderColor:"#E74C3C"}},"View Details"))))))))),r.a.createElement(F.a,{show:g,onHide:()=>b(!1)},r.a.createElement(F.a.Header,{closeButton:!0},r.a.createElement(F.a.Title,null,"Confirm Deletion")),r.a.createElement(F.a.Body,null,'Are you sure you want to delete "',null===y||void 0===y?void 0:y.title,'"?'),r.a.createElement(F.a.Footer,null,r.a.createElement(p.a,{variant:"secondary",onClick:()=>b(!1)},"No"),r.a.createElement(p.a,{variant:"danger",onClick:async()=>{try{await h.a.delete("http://localhost:5000/api/books/"+y._id,{withCredentials:!0}),n(t.filter(e=>e._id!==y._id)),b(!1)}catch(e){console.error("Error deleting book:",e)}}},"Yes")))):r.a.createElement("div",null,"No profile data available")},V=t(9),K=t.n(V),Q=(t(67),t(103)),X=t(104);var Z=()=>{const{checkAuthStatus:e}=_(),[a,t]=Object(l.useState)({email:"",password:""}),[n,c]=Object(l.useState)(""),o=Object(s.r)(),m=e=>{t({...a,[e.target.name]:e.target.value})};return r.a.createElement("form",{onSubmit:async t=>{t.preventDefault();try{const t=await h.a.post("http://localhost:5000/api/auth/signin",a,{withCredentials:!0});c(t.data.message),await e(),"admin"===t.data.role?o("/admin"):o("/profile")}catch(n){var l,r;c((null===(l=n.response)||void 0===l||null===(r=l.data)||void 0===r?void 0:r.message)||"An error occurred during sign-in")}},className:K.a["sign-in-form"]},r.a.createElement("h2",{className:K.a.title},"Sign in"),r.a.createElement("div",{className:K.a["input-field"]},r.a.createElement("div",{className:K.a.ccc},r.a.createElement(Q.a,null)),r.a.createElement("input",{type:"email",name:"email",placeholder:"Email",required:!0,onChange:m,value:a.email})),r.a.createElement("div",{className:K.a["input-field"]},r.a.createElement("div",{className:K.a.ccc},r.a.createElement(X.a,null)),r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",required:!0,onChange:m,value:a.password})),n&&r.a.createElement("div",{className:K.a.message},n),r.a.createElement("input",{type:"submit",value:"Login",className:`${K.a.btn} ${K.a.solid}`}))},ee=t(105);var ae=e=>{let{onSignUpSuccess:a}=e;const[t,n]=Object(l.useState)({username:"",email:"",password:""}),[c,o]=Object(l.useState)(""),s=e=>{n({...t,[e.target.name]:e.target.value})};return r.a.createElement("form",{onSubmit:async e=>{e.preventDefault();try{const e=await h.a.post("http://localhost:5000/api/auth/signup",t,{withCredentials:!0});o(e.data.message),a(),n({username:"",email:"",password:""})}catch(c){var l,r;o((null===(l=c.response)||void 0===l||null===(r=l.data)||void 0===r?void 0:r.message)||"An error occurred during signup")}},className:K.a["sign-up-form"]},r.a.createElement("h2",{className:K.a.title},"Sign up"),r.a.createElement("div",{className:K.a["input-field"]},r.a.createElement("div",{className:K.a.ccc},r.a.createElement(Q.a,null)),r.a.createElement("input",{type:"text",name:"username",placeholder:"Name",required:!0,onChange:s,value:t.username})),r.a.createElement("div",{className:K.a["input-field"]},r.a.createElement("div",{className:K.a.ccc},r.a.createElement(ee.a,null)),r.a.createElement("input",{type:"email",name:"email",placeholder:"Email",required:!0,onChange:s,value:t.email})),r.a.createElement("div",{className:K.a["input-field"]},r.a.createElement("div",{className:K.a.ccc},r.a.createElement(X.a,null)),r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",required:!0,onChange:s,value:t.password})),c&&r.a.createElement("div",{className:K.a.message},c),r.a.createElement("input",{type:"submit",className:K.a.btn,value:"Sign up"}))},te=t(62),le=t.n(te);var re=()=>{const[e,a]=Object(l.useState)(!1),t=()=>{a(!1)};return r.a.createElement("div",{className:`${K.a.container} ${e?K.a["sign-up-mode"]:""}`},r.a.createElement("div",{className:K.a["forms-container"]},r.a.createElement("div",{className:K.a["signin-signup"]},r.a.createElement(Z,null),r.a.createElement(ae,{onSignUpSuccess:t}))),r.a.createElement("div",{className:K.a["panels-container"]},r.a.createElement("div",{className:`${K.a.panel} ${K.a["left-panel"]}`},r.a.createElement("div",{className:K.a.content},r.a.createElement("h3",null,"New to our ebook library?"),r.a.createElement("p",null,"Discover a world of knowledge and entertainment with our extensive collection of ebooks. Join us today and start your reading journey!"),r.a.createElement("button",{className:`${K.a.btn} ${K.a.transparent}`,onClick:()=>{a(!0)}},"Sign up")),r.a.createElement("img",{src:le.a,className:K.a.image,alt:"Reading"})),r.a.createElement("div",{className:`${K.a.panel} ${K.a["right-panel"]}`},r.a.createElement("div",{className:K.a.content},r.a.createElement("h3",null,"Already a member?"),r.a.createElement("p",null,"Welcome back! Sign in to continue exploring our collection and enjoy personalized recommendations based on your reading history."),r.a.createElement("button",{className:`${K.a.btn} ${K.a.transparent}`,onClick:t},"Sign in")),r.a.createElement("img",{src:le.a,className:K.a.image,alt:"Reading"}))))};var ne=e=>{let{children:a}=e;const{isLoggedIn:t}=_();return t?a:r.a.createElement(s.a,{to:"/login",replace:!0})};var ce=function(){const[e,a]=Object(l.useState)({totalBooks:0,totalUsers:0});Object(l.useEffect)(()=>{(async()=>{try{const e=await h.a.get("http://localhost:5000/api/admin//summary",{withCredentials:!0});a({totalBooks:e.data.totalBooks,totalUsers:e.data.totalUsers})}catch(e){console.error("Error fetching summary data:",e)}})()},[]);const t=[{title:"TOTAL BOOKS",value:e.totalBooks,icon:N.a},{title:"TOTAL USERS",value:e.totalUsers,icon:N.e}];return r.a.createElement(f.a,null,t.map((e,a)=>r.a.createElement(v.a,{key:a,md:6,className:"mb-4"},r.a.createElement(O.a,{className:"h-100"},r.a.createElement(O.a.Body,{className:"d-flex flex-column"},r.a.createElement("div",{className:"d-flex justify-content-between align-items-center mb-3"},r.a.createElement(O.a.Title,{className:"m-0"},e.title),r.a.createElement(e.icon,{size:24,className:"text-primary"})),r.a.createElement(O.a.Text,{as:"h3",className:"mb-0"},e.value))))))},oe=t(106);var se=()=>{const[e,a]=Object(l.useState)([]),[t,n]=Object(l.useState)(null),c=async()=>{try{const e=await h.a.get("http://localhost:5000/api/admin//users",{withCredentials:!0});a(e.data)}catch(e){n("Failed to fetch users. Please try again.")}};Object(l.useEffect)(()=>{c()},[]);return r.a.createElement(i.a,{className:"mt-4"},r.a.createElement("h2",null,"User Management"),t&&r.a.createElement(Y.a,{variant:"danger"},t),r.a.createElement(oe.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ID"),r.a.createElement("th",null,"Username"),r.a.createElement("th",null,"Email"),r.a.createElement("th",null,"Actions"))),r.a.createElement("tbody",null,e.map(e=>r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,e._id),r.a.createElement("td",null,e.username),r.a.createElement("td",null,e.email),r.a.createElement("td",null,r.a.createElement(p.a,{variant:"danger",onClick:()=>(async e=>{try{window.confirm("Are you sure you want to delete this user?")&&(await h.a.delete("http://localhost:5000/api/admin/users/"+e,{withCredentials:!0}),c())}catch(a){n("Failed to delete the user. Please try again.")}})(e._id)},"Delete")))))))};var me=()=>r.a.createElement(i.a,{fluid:!0,className:"dashboard p-4"},r.a.createElement("h1",null,"Admin Dashboard"),r.a.createElement(ce,null),r.a.createElement(f.a,{className:"mt-4"},r.a.createElement(v.a,null,r.a.createElement(se,null))));var ie=e=>{let{children:a}=e;const{isAdmin:t,isLoading:l}=_();return l?r.a.createElement("div",null,"Loading..."):t?a:r.a.createElement(s.a,{to:"/",replace:!0})};const ue=()=>{const{isLoading:e}=_();if(e)return r.a.createElement("div",null,"Loading...");const a=Object(o.c)(Object(s.m)(r.a.createElement(s.c,{path:"/",element:r.a.createElement(j,null)},r.a.createElement(s.c,{index:!0,element:r.a.createElement(I,null)}),"~",r.a.createElement(s.c,{path:"/allbooks/:category/:bookId",element:r.a.createElement(D,null)}),r.a.createElement(s.c,{path:"*",element:r.a.createElement(L,null)}),r.a.createElement(s.c,{path:"/search",element:r.a.createElement(R,null)}),r.a.createElement(s.c,{path:"/login",element:r.a.createElement(re,null)}),r.a.createElement(s.c,{path:"/aboutus",element:r.a.createElement(H,null)}),r.a.createElement(s.c,{path:"/admin",element:r.a.createElement(ie,null,r.a.createElement(me,null))}),r.a.createElement(s.c,{path:"/addbook",element:r.a.createElement(ne,null,r.a.createElement(z,null))}),r.a.createElement(s.c,{path:"/favorites",element:r.a.createElement(ne,null,r.a.createElement(M,null))}),r.a.createElement(s.c,{path:"/profile",element:r.a.createElement(ne,null,r.a.createElement(J,null))}))));return r.a.createElement(o.b,{router:a})};var de=()=>r.a.createElement(S,null,r.a.createElement(ue,null));c.a.createRoot(document.getElementById("root")).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(de,null)))}},[[74,1,2]]]);
//# sourceMappingURL=main.f9d1dc44.chunk.js.map